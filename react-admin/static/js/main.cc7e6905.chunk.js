(this["webpackJsonpreact-admin"]=this["webpackJsonpreact-admin"]||[]).push([[0],{217:function(e,t){e.exports="data:image/gif;base64,R0lGODlhGAAXAOYAAPz8/sjU6/7+/Pv8/sfW6sbW7srV6sbV6cfW7MXV7f7+///9/snV7sjU7crV6P7//cjX68rV7P3//snU68fT6v3//Pz9/9Pb79La7sXU6tjh8//+/Pj+/PH2/PT1+djh8cnT7enr9/Dz+MvX8N7r8+3y+MjT6MXW5/v7/d/j8Ovw9v7/+ubt9cnU58TV7czX7sjV59jf8sfX7dLe7/z//8bU783b6c/X68zZ6/3+//X6//L3/fX4/dvj8dDY7t7k8+zt8u/y+8XW7sfV8Pf4+uLp88fT7P39/+bq9cjU78rU7v39/fj5/cbX6Pr7//79/83a7vL1+vX1/fT3/svW6fv//8zX7Pn9/tTg8fv6/9/n88rW5/v8/8vY7Ofu9u7z+dLd8Nfe78jV6cXV68nV7MnW6v///f/+//7+/v7//////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxMzggNzkuMTU5ODI0LCAyMDE2LzA5LzE0LTAxOjA5OjAxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjI4NTNlZTljLTdiMDEtNDU2ZC05NGI2LTc3ZWJiODBhYzE0MSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo5NjMwNjQyRkM2NjYxMUU5QThBRUFGQzE5OTIyRDBEQyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5NjMwNjQyRUM2NjYxMUU5QThBRUFGQzE5OTIyRDBEQyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxNSAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjdiM2ZkMzIzLWM1ZmMtNGQxMi05MDY5LTZjNWRlYWYxZjM1ZSIgc3RSZWY6ZG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjJmMTE2ZDVmLWY4ZDItMTE3OS1hNzI0LWYxYjQ3ZTM4MzE4YyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAAAAAAALAAAAAAYABcAAAf/gA9qg2ppaWdqaImEjGpmio2LZ2hmS4ZmkYyQhJiDaRYoiwKakWlqG2pSKRpdFD5BZphom2oKimaHZjxUZWRiIwwtJJC0hZSHakUJZAERERRkZDnFiaZmEmdpHwEECAVjEGQNTmnUuYdEOMzRAWViZUCGg5BmCoxIBwgJCGVGCGNlwDhKYwaRI00lyMAoUyYJATHvehxTYxDRmU5VMBxQYqJBOzEFdnhCk40iowVqvCQwEEDGuxpY1CxAg8xUoUcyz1QI42CMGF83onQyaZOgpBVprEAQ40JMh1jzCCkqly3NkzRfHARgQKDMDwk2FY2Kmu2KhxBQJhQ4MIFBAi0ibZh0KlhtSgwbYwq8Y8iXoZAAL2awOJbtApkDBU5AGMO4MeMyLIc40GHoDAcDTcSAMNAgmmfPYwgQyLBFBcWLXAaoHmABgOvXrrO4Vn1kEo00AgyqGVuqmKCDoyr8LhXLHqQzkxzpzqQI0qgzgQAAOw=="},218:function(e,t){e.exports="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QOPaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzEzOCA3OS4xNTk4MjQsIDIwMTYvMDkvMTQtMDE6MDk6MDEgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6Mjg1M2VlOWMtN2IwMS00NTZkLTk0YjYtNzdlYmI4MGFjMTQxIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjA0RjM1MjQ2QzY2QTExRTlBOEFFQUZDMTk5MjJEMERDIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjA0RjM1MjQ1QzY2QTExRTlBOEFFQUZDMTk5MjJEMERDIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6N2IzZmQzMjMtYzVmYy00ZDEyLTkwNjktNmM1ZGVhZjFmMzVlIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6MmYxMTZkNWYtZjhkMi0xMTc5LWE3MjQtZjFiNDdlMzgzMThjIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/+4ADkFkb2JlAGTAAAAAAf/bAIQABgQEBAUEBgUFBgkGBQYJCwgGBggLDAoKCwoKDBAMDAwMDAwQDA4PEA8ODBMTFBQTExwbGxscHx8fHx8fHx8fHwEHBwcNDA0YEBAYGhURFRofHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8f/8AAEQgAFwAYAwERAAIRAQMRAf/EAGIAAAIDAQAAAAAAAAAAAAAAAAMFBAYHCAEBAAAAAAAAAAAAAAAAAAAAABAAAgEDBAIABwEAAAAAAAAAAQIDEQQFADESEyEGUcEiQtMUlAcRAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/AOlr+XJTXyWFmxto+vtnvSnKgJoEj5fTyO5rsNAGRctjHik/YkyFo7rHPG6L2oHNOamMLUA7gjbQOdBlfuskh9nu1LtxHWF8mgHWp+egB7NjosTlTa200kkYRHDOwLVYfFaaDVLFmayt2Y1YxISTuTxGgT5XH+mz30kmSe3F54EgefrbwBSqh1+2mgiDEf54CD2Wv9R/JoLRH1iNeunXQcOO3Gnimg//2Q=="},237:function(e,t,a){e.exports=a(471)},242:function(e,t,a){},265:function(e,t,a){},318:function(e,t,a){},470:function(e,t,a){},471:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(4),o=a.n(l),i=(a(242),a(30)),s=a(64);function c(){return r.a.createElement("div",null,"404,\u672a\u5339\u914d")}var u=a(28),d=a(115),p=a(7),m=a(8),h=a(10),f=a(9),E=a(11),g=a(483),A=a(215),b=a(116),y=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(m.a)(t,[{key:"errorText",value:function(){return this.state.isValid?null:r.a.createElement("span",{style:{color:"red",textAlign:"center",width:"150px",fontSize:"12px",position:"absolute",left:"100%",top:"5px",padding:"0 0 0 15px"}},this.getErrorMessage())}},{key:"render",value:function(){var e=this.props,t=(e.errorMessages,e.validators,e.requiredError,e.validatorListener,Object(A.a)(e,["errorMessages","validators","requiredError","validatorListener"]));return r.a.createElement(n.Fragment,null,r.a.createElement("input",t),this.errorText())}}]),t}(b.ValidatorComponent),v=a(20),O=a.n(v);O.a.interceptors.request.use((function(e){return console.log("config.url",e.url),e}),(function(e){return Promise.reject(e)}));var R={userLogin:function(e){return O.a.post("/api/userlogin",e)},loadUserList:function(e){return e=Object(u.a)({},e,{},{_sort:"id",_order:"desc"}),O.a.get("/per/user",{params:e})},addUser:function(e){return O.a.post("/per/user",e)},deleteUser:function(e){return Promise.all(e.map((function(e){return O.a.delete("/per/user/".concat(e))})))},updataUser:function(e){return O.a.put("/per/user/".concat(e.id),e)},loadRoleList:function(e){return O.a.get("/per/role",{params:e})},deleteRoles:function(e){return Promise.all(e.map((function(e){return O.a.delete("/per/role/".concat(e))})))},addRole:function(e){return O.a.post("/per/role",e)},saveRole:function(e){return O.a.put("/per/role/".concat(e.id),e)},loadPerList:function(e){return O.a.get("/per/permission",{params:e})},addPer:function(e){return O.a.post("/per/permission",e)},editPer:function(e){return O.a.put("/per/permission/".concat(e.id),e)},deletePer:function(e){return Promise.all(e.map((function(e){return O.a.delete("/per/permission/".concat(e))})))},loadAllRoles:function(){return O.a.get("/per/role")},loadUserRoles:function(e){return O.a.get("/per/user_role",{params:{userId:e}})},addUserRole:function(e){return O.a.post("/per/user_role",e)},deleteUserRole:function(e){return O.a.delete("/per/user_role/".concat(e))},loadAllPer:function(){return O.a.get("/per/permission")},loadRolePer:function(e){return O.a.get("/per/role_permission",{params:{roleId:e}})},addRolePer:function(e){return O.a.post("/per/role_permission",e)},deleteRolePer:function(e){return O.a.delete("/per/role_permission/".concat(e))},loadUserPer:function(e){return O.a.get("/per/user_permission",{params:{userId:e}})},addUserPer:function(e){return O.a.post("/per/user_permission",e)},deleteUserPer:function(e){return O.a.delete("/per/user_permission/".concat(e))},loadUserAllPer:function(e){return O.a.get("/per/getUserPer/".concat(e))}},j="APP_LOGIN_USER";function D(){var e=sessionStorage.getItem(j);return e?JSON.parse(e):null}function w(){return sessionStorage.getItem("Authorization")}function I(){var e=D().id,t=sessionStorage.getItem("LOGIN_USER_PER");return t?Promise.resolve(JSON.parse(t)):R.loadUserAllPer(e).then((function(e){return sessionStorage.setItem("LOGIN_USER_PER",JSON.stringify(e.data)),e.data}))}function S(e){return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate()," ").concat(e.getHours(),":").concat(e.getMinutes(),":").concat(e.getSeconds())}var k=a(217),P=a.n(k),x=a(218),C=a.n(x),M=(a(265),function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).handleSubmit=function(){var e=a.props,t=e.history,n=e.location;R.userLogin(a.state).then((function(e){if(1===e.data.code){o=e.data.user,sessionStorage.setItem(j,JSON.stringify(o)),l=e.data.token,sessionStorage.setItem("Authorization",l);var a="/home";if(n.search){var r=function(e){if(!e)return null;var t=(e=e.slice(1)).split("&"),a={};return t.forEach((function(e){var t=e.split("=");a[t[0]]=t[1]})),a}(n.search);r.preurl&&(a=r.preurl)}t.push(a)}else g.a.error("\u767b\u5f55\u5931\u8d25\uff0c\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u7528\u6237\u540d\u5bc6\u7801\uff01");var l,o}))},a.handlerChange=function(e){var t=Object(d.a)({},e.target.name,e.target.value);a.setState((function(e){return Object(u.a)({},e,{},t)}))},a.state={username:"18911112222",password:"aicoder.com",code:"22222"},a}return Object(E.a)(t,e),Object(m.a)(t,[{key:"changeCode",value:function(e){e.target.src="/api/code/?id="+Date.now()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"top"},r.a.createElement("div",{className:"logo-wrap"},r.a.createElement(i.b,{className:"logo",to:"/home"})))),r.a.createElement("div",{className:"main-bd"},r.a.createElement("div",{className:"login-box-wrap"},r.a.createElement("div",{className:"login-box container"},r.a.createElement(b.ValidatorForm,{onSubmit:this.handleSubmit,className:"login-group"},r.a.createElement("div",{className:"input-group"},r.a.createElement("img",{src:P.a,alt:"\u7528\u6237\u540d"}),r.a.createElement(y,{name:"username",onChange:this.handlerChange,value:this.state.username,placeholder:"\u8bf7\u8f93\u5165\u7535\u8bdd\u53f7\u7801",validators:["required","matchRegexp:^[0-9a-zA-Z]{6,12}$"],errorMessages:["*\u7528\u6237\u540d\u662f\u5fc5\u586b\u9879\uff01","*\u8bf7\u8f93\u51656-12\u4e2a\u5b57\u7b26\uff01"]})),r.a.createElement("div",{className:"input-group grey-border"},r.a.createElement("img",{src:C.a,alt:"\u7528\u6237\u540d"}),r.a.createElement(y,{type:"password",name:"password",onChange:this.handlerChange,value:this.state.password,placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",validators:["required","matchRegexp:^[0-9a-zA-Z.]{6,20}$"],errorMessages:["*\u5bc6\u7801\u662f\u5fc5\u586b\u9879\uff01","*\u8bf7\u8f93\u51656-20"]})),r.a.createElement("div",{className:"code-group input-group"},r.a.createElement(y,{name:"code",onChange:this.handlerChange,value:this.state.code,type:"text",placeholder:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",className:"code",validators:["required","matchRegexp:^[0-9a-zA-Z]{5}$"],errorMessages:["*\u9a8c\u8bc1\u7801\u662f\u5fc5\u586b\u9879\uff01","*\u8bf7\u8f93\u51655\u4e2a\u5b57\u7b26\u9a8c\u8bc1\u7801\uff01"]}),r.a.createElement("div",{className:"img-code"},r.a.createElement("img",{onClick:function(t){return e.changeCode(t)},src:"/api/code",alt:""}))),r.a.createElement("button",{className:"login-btn-grop"},"\u767b\u5f55 "),r.a.createElement("div",{className:"link-group"},"\u5fd8\u8bb0\u5bc6\u7801? ")),r.a.createElement("div",{className:"login-aside"},r.a.createElement("p",null,"\u8fd8\u6ca1\u6ce8\u518c\uff1f"),r.a.createElement("p",{className:"active"},"\u7acb\u5373\u6ce8\u518c>>"))))),r.a.createElement("div",{className:"main-ft"},"\xa9\u7248\u6743\u6240\u6709 aicoder.com 2016-2019"))}}]),t}(n.Component)),U=a(476),L=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={authorized:!1},a}return Object(E.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getLoginUserAllPer()}},{key:"getLoginUserAllPer",value:function(){var e=this;I().then((function(t){var a=t.findIndex((function(t){return t.id===e.props.per}))>0;e.setState({authorized:a})}))}},{key:"UNSAFE_componentWillReceiveProps",value:function(){this.getLoginUserAllPer()}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,this.state.authorized?r.a.createElement(s.b,this.props):r.a.createElement(s.b,{path:this.props.path,render:function(){return r.a.createElement("h3",null,"\u6ca1\u6709\u6743\u9650")}}))}}]),t}(n.Component),T=a(90),N=a(5),_=T.a.SubMenu,F=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={current:"user_mgr",perMenu:[]},a.handleMenuClick=function(e){var t=a.state.perMenu.find((function(t){return t.id==e.key})).url;a.props.history.push(t),a.setState({current:e.key})},a}return Object(E.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;I().then((function(t){e.setState({perMenu:t.filter((function(e){return"menu"===e.type}))})}))}},{key:"render",value:function(){var e=this,t=this.state.perMenu.filter((function(e){return 0==e.pId}));return r.a.createElement("div",{className:"aside-menu-bar"},r.a.createElement(T.a,{onClick:this.handleMenuClick,selectedKeys:[this.state.current],mode:"inline"},t.map((function(t){var a=e.state.perMenu.filter((function(e){return e.pId==t.id}));return a.sort((function(e,t){return e.order-t.order})),r.a.createElement(_,{key:t.id,title:r.a.createElement("span",null,r.a.createElement(N.a,{type:"pie-chart"}),t.des)},a.map((function(e){return r.a.createElement(T.a.Item,{key:e.id},r.a.createElement(N.a,{type:"codepen-circle"}),e.des)})))}))))}}]),t}(n.Component),Z=a(481),z=(a(318),function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={loginUser:D()},a.handlerLogout=function(){var e=a.props.history;Z.a.confirm({title:"\u63d0\u793a",content:"\u786e\u8ba4\u9000\u51fa\u5417?",onOk:function(){sessionStorage.clear(),e.push("/login")}})},a}return Object(E.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"logo-wrap components-top"},r.a.createElement("a",{href:"/"},r.a.createElement("h1",{style:{color:"#fff",fontSize:"30px"}},r.a.createElement(N.a,{type:"slack"}),"\u5b89\u5fc3\u8d26\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf"))),r.a.createElement("div",{className:"user-wrap components-top"},r.a.createElement("div",{className:"btn-group"},r.a.createElement(N.a,{type:"user"}),r.a.createElement("span",null,this.state.loginUser&&this.state.loginUser.username)),r.a.createElement("div",{className:"btn-group",onClick:this.handlerLogout},r.a.createElement(N.a,{type:"logout"}),"\u767b\u51fa")))}}]),t}(n.Component)),Y=a(123),G={LOAD_USER_LIST:"LOAD_USER_LIST",ADD_USER:"ADD_USER",EIDT_USER:"EIDT_USER",LOAD_PER_LIST:"LOAD_PER_LIST",ADD_PER:"ADD_PER",EDIT_PER:"EDIT_PER",DEL_PER:"DEL_PER"},B=a(479),W=a(96),Q=a(480),H=W.a.Option,J=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.form.setFieldsValue({pId:0,type:"menu",order:"1"})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(B.a,{layout:"horizontal",labelCol:{span:4},wrapperCol:{span:20}},r.a.createElement(B.a.Item,{label:"\u6743\u9650\u540d"},e("des",{rules:[{min:2,max:20,message:"\u8bf7\u8f93\u51652-20\u4e2a\u5b57\u7b26"},{required:!0,message:"\u8bf7\u8f93\u5165\u6743\u9650\u540d"}]})(r.a.createElement(Q.a,{prefix:r.a.createElement(N.a,{type:"user"}),placeholder:"\u6743\u9650\u540d"}))),r.a.createElement(B.a.Item,{label:"\u6743\u9650\u7c7b\u578b"},e("type",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6743\u9650\u7c7b\u578b"}]})(r.a.createElement(W.a,null,r.a.createElement(H,{value:"menu"},"\u83dc\u5355\u6743\u9650"),r.a.createElement(H,{value:"action"},"\u8bf7\u6c42\u6743\u9650"),r.a.createElement(H,{value:"router"},"\u8def\u7531\u6743\u9650"),r.a.createElement(H,{value:"resource"},"\u8d44\u6e90\u6743\u9650"),r.a.createElement(H,{value:"component"},"\u7ec4\u4ef6\u6743\u9650")))),r.a.createElement(B.a.Item,{label:"\u6743\u9650\u7801"},e("code",{rules:[{min:2,max:20,message:"\u8bf7\u8f93\u51652-20\u4e2a\u5b57\u7b26!"}]})(r.a.createElement(Q.a,{prefix:r.a.createElement(N.a,{type:"user"}),placeholder:"\u6743\u9650\u7801"}))),r.a.createElement(B.a.Item,{label:"\u7236\u6743\u9650"},e("pId",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7236\u6743\u9650!"}]})(r.a.createElement(Q.a,{prefix:r.a.createElement(N.a,{type:"user"}),placeholder:"\u7236\u6743\u9650"}))),r.a.createElement(B.a.Item,{label:"\u5730\u5740"},e("url")(r.a.createElement(Q.a,{prefix:r.a.createElement(N.a,{type:"mail"}),placeholder:"\u5730\u5740"}))),r.a.createElement(B.a.Item,{label:"\u6392\u5e8f"},e("order")(r.a.createElement(Q.a,{prefix:r.a.createElement(N.a,{type:"mail"}),placeholder:"\u6392\u5e8f"}))))}}]),t}(n.Component),X=B.a.create({name:"addPer_from"})(J),V=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).perAddFrm=null,a.handleAddPer=function(){a.perAddFrm.validateFields((function(e,t){if(e)return g.a.error("\u6dfb\u52a0\u5931\u8d25");var n=Object.assign({id:Date.now(),del:0,status:0,subon:S(new Date),subby:D().id},t);a.props.addPer(n).then((function(e){g.a.info("\u6dfb\u52a0\u6210\u529f"),a.props.close(),a.props.loadData()})).catch((function(e){console.log(e),g.a.error("\u6dfb\u52a0\u5931\u8d25")}))}))},a}return Object(E.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(Z.a,{title:"\u6dfb\u52a0\u6743\u9650\u4fe1\u606f",visible:this.props.visible,onOk:this.handleAddPer,cancelText:"\u53d6\u6d88",okText:"\u6dfb\u52a0",onCancel:function(){return e.props.close()},destroyOnClose:!0},r.a.createElement(X,{ref:function(t){return e.perAddFrm=t}}))}}]),t}(n.Component),K=W.a.Option,q=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.data;this.props.form.setFieldsValue({pId:e.pId,type:e.type,order:e.order,des:e.des,code:e.code,url:e.url})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(B.a,{layout:"horizontal",labelCol:{span:4},wrapperCol:{span:20}},r.a.createElement(B.a.Item,{label:"\u6743\u9650\u540d"},e("des",{rules:[{min:2,max:20,message:"\u8bf7\u8f93\u51652-20\u4e2a\u5b57\u7b26"},{required:!0,message:"\u8bf7\u8f93\u5165\u6743\u9650\u540d"}]})(r.a.createElement(Q.a,{prefix:r.a.createElement(N.a,{type:"user"}),placeholder:"\u6743\u9650\u540d"}))),r.a.createElement(B.a.Item,{label:"\u6743\u9650\u7c7b\u578b"},e("type",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6743\u9650\u7c7b\u578b"}]})(r.a.createElement(W.a,null,r.a.createElement(K,{value:"menu"},"\u83dc\u5355\u6743\u9650"),r.a.createElement(K,{value:"action"},"\u8bf7\u6c42\u6743\u9650"),r.a.createElement(K,{value:"router"},"\u8def\u7531\u6743\u9650"),r.a.createElement(K,{value:"resource"},"\u8d44\u6e90\u6743\u9650"),r.a.createElement(K,{value:"component"},"\u7ec4\u4ef6\u6743\u9650")))),r.a.createElement(B.a.Item,{label:"\u6743\u9650\u7801"},e("code",{rules:[{min:2,max:20,message:"\u8bf7\u8f93\u51652-20\u4e2a\u5b57\u7b26!"}]})(r.a.createElement(Q.a,{prefix:r.a.createElement(N.a,{type:"user"}),placeholder:"\u6743\u9650\u7801"}))),r.a.createElement(B.a.Item,{label:"\u7236\u6743\u9650"},e("pId",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7236\u6743\u9650!"}]})(r.a.createElement(Q.a,{prefix:r.a.createElement(N.a,{type:"user"}),placeholder:"\u7236\u6743\u9650"}))),r.a.createElement(B.a.Item,{label:"\u5730\u5740"},e("url")(r.a.createElement(Q.a,{prefix:r.a.createElement(N.a,{type:"mail"}),placeholder:"\u5730\u5740"}))),r.a.createElement(B.a.Item,{label:"\u6392\u5e8f"},e("order")(r.a.createElement(Q.a,{prefix:r.a.createElement(N.a,{type:"mail"}),placeholder:"\u6392\u5e8f"}))))}}]),t}(n.Component),$=B.a.create({name:"edit_from"})(q),ee=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).editFrm=null,a.handleEditPer=function(){a.editFrm.validateFields((function(e,t){e||a.props.editPer(Object.assign({},a.props.data,t)).then((function(e){g.a.info("\u4fee\u6539\u6210\u529f"),a.props.close()})).catch((function(e){console.log(e),g.a.error("\u4fee\u6539\u5931\u8d25")}))}))},a}return Object(E.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Z.a,{title:"\u4fee\u6539\u6743\u9650\u4fe1\u606f",visible:this.props.visible,okText:"\u4fee\u6539",cancelText:"\u53d6\u6d88",onCancel:function(){e.props.close()},onOk:this.handleEditPer,destroyOnClose:!0},r.a.createElement($,{ref:function(t){return e.editFrm=t},data:this.props.data})))}}]),t}(n.Component),te=a(35),ae=a(472),ne=a(482),re=a(477),le=Q.a.Search,oe=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(l)))).state={showAddPerDialog:!1,showEditPerDialog:!1,editPer:null,selectedRowKeys:[],params:{_page:1,_limit:6,q:"",_sort:"id",_order:"desc"},columns:[{dataIndex:"id",title:"\u7f16\u53f7"},{dataIndex:"type",title:"\u6743\u9650\u7c7b\u578b"},{dataIndex:"des",title:"\u6743\u9650\u63cf\u8ff0"},{dataIndex:"url",title:"\u5730\u5740"},{dataIndex:"pId",title:"\u7236\u6743\u9650"},{dataIndex:"order",title:"\u6392\u5e8f"},{dataIndex:"del",title:"\u7f16\u8f91",render:function(e,t){return r.a.createElement("div",null,r.a.createElement(te.a,{onClick:function(){return a.showEditPer(t)},style:{marginRight:"5px"},type:"primary"},"\u7f16\u8f91"),r.a.createElement(ae.a,{title:"\u60a8\u662f\u5426\u771f\u8981\u5220\u9664\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onConfirm:function(){a.deletePerIds([t.id])}},r.a.createElement(te.a,{type:"danger"},"\u5220\u9664")))}}]},a.buttonStyle={margin:"5px"},a.loadData=function(){a.props.loadDataAsync(a.state.params)},a.handleAdd=function(){a.setState({showAddPerDialog:!0})},a.closeAddPerDialog=function(){a.setState({showAddPerDialog:!1})},a.closeEditPerDialog=function(){a.setState({showEditPerDialog:!1})},a.handleDelete=function(){a.state.selectedRowKeys.length<=0?g.a.error("\u8bf7\u9009\u62e9\u6570\u636e\u8fdb\u884c\u5220\u9664!"):Z.a.confirm({title:"\u786e\u8ba4\u8981\u5220\u9664\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){a.deletePerIds(a.state.selectedRowKeys)}})},a.deletePerIds=function(e){a.props.submitDeletePer(e).then((function(t){g.a.info("\u5220\u9664\u6210\u529f\uff01");var n=a.state.selectedRowKeys.filter((function(t){return!e.includes(t)}));a.setState({selectedRowKeys:n});var r=a.props.perList.filter((function(t){return!e.includes(t.id)})),l=a.state.params._page;0===r.length&&l>1?a.changePage(l-1,a.state.params._limit):a.loadData()})).catch((function(e){console.log(e),g.a.error("\u5220\u9664\u5931\u8d25\uff01")}))},a.handleBarEdit=function(){if(1!==a.state.selectedRowKeys.length)return g.a.error("\u9009\u4e2d\u4e00\u6761\u6570\u636e\u8fdb\u884c\u4fee\u6539!");var e=a.state.selectedRowKeys[0],t=a.props.perList.find((function(t){return t.id===e}));a.showEditPer(t)},a.handleSearch=function(e){a.setState((function(t){return Object(u.a)({},t).params.q=e,t}),(function(){a.loadData()}))},a.showEditPer=function(e){a.setState({showEditPerDialog:!0,editPer:e})},a.changePage=function(e,t){a.setState((function(a){var n=Object(u.a)({},a.params);return n._page=e,n._limit=t,Object.assign({},a,{params:n})}),(function(){a.loadData()}))},a}return Object(E.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var e=this,t={selectedRowKeys:this.state.selectedRowKeys,onChange:function(t){e.setState({selectedRowKeys:t})}};return r.a.createElement("div",null,r.a.createElement(ne.a,null,r.a.createElement(ne.a.Item,null,r.a.createElement(i.b,{to:"/home"},"\u9996\u9875")),r.a.createElement(ne.a.Item,null,r.a.createElement(i.b,{to:"/home/user_mgr"},"\u6743\u9650\u7ba1\u7406"))),r.a.createElement("hr",null),r.a.createElement(te.a,{style:this.buttonStyle,type:"primary",onClick:this.handleAdd},"\u6dfb\u52a0"),r.a.createElement(te.a,{style:this.buttonStyle,type:"primary",onClick:this.handleBarEdit},"\u7f16\u8f91"),r.a.createElement(te.a,{style:this.buttonStyle,type:"danger",onClick:this.handleDelete},"\u5220\u9664"),r.a.createElement(le,{placeholder:"\u641c\u7d22",enterButton:!0,style:{width:"300px",margin:"5px"},onSearch:this.handleSearch}),r.a.createElement(re.a,{style:{background:"#fefefe"},dataSource:this.props.perList,columns:this.state.columns,rowKey:"id",bordered:!0,rowSelection:t,pagination:{total:this.props.total,pageSize:6,defaultCurrent:1,onChange:this.changePage}}),r.a.createElement(V,{visible:this.state.showAddPerDialog,close:this.closeAddPerDialog,addPer:this.props.addPer,loadData:this.loadData}),r.a.createElement(ee,{visible:this.state.showEditPerDialog,close:this.closeEditPerDialog,data:this.state.editPer,editPer:this.props.editPer}))}}]),t}(n.Component),ie=Object(Y.b)((function(e){return{total:e.PerList.total,perList:e.PerList.list}}),(function(e){return{loadDataAsync:function(t){e(function(e){return function(t){return R.loadPerList(e).then((function(e){var a=parseInt(e.headers["x-total-count"]);t({type:G.LOAD_PER_LIST,payload:{list:e.data,total:a}})}))}}(t))},addPer:function(t){return e((a=t,function(e){return R.addPer(a).then((function(t){e({type:G.ADD_PER,payload:t.data})}))}));var a},editPer:function(t){return e((a=t,function(e){return R.editPer(a).then((function(t){e({type:G.EDIT_PER,payload:t.data})}))}));var a},submitDeletePer:function(t){return e(function(e){return function(t){return R.deletePer(e).then((function(e){t({type:G.DEL_PER,payload:e})}))}}(t))}}}))(oe),se=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.form.setFieldsValue({pId:0})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(B.a,{layout:"horizontal",labelCol:{span:4},wrapperCol:{span:20}},r.a.createElement(B.a.Item,{label:"\u89d2\u8272\u540d"},e("name",{rules:[{min:2,max:20,message:"\u8bf7\u8f93\u51652-20\u4e2a\u5b57\u7b26"},{required:!0,message:"\u8bf7\u8f93\u5165\u89d2\u8272\u540d"}]})(r.a.createElement(Q.a,{prefix:r.a.createElement(N.a,{type:"user"}),placeholder:"\u89d2\u8272\u540d"}))),r.a.createElement(B.a.Item,{label:"\u89d2\u8272\u63cf\u8ff0"},e("des",{rules:[{pattern:/\w{2,20}/gi,message:"\u8bf7\u8f93\u5165\u89d2\u8272\u63cf\u8ff0"}]})(r.a.createElement(Q.a,{prefix:r.a.createElement(N.a,{type:"setting"}),placeholder:"\u89d2\u8272\u63cf\u8ff0"}))),r.a.createElement(B.a.Item,{label:"\u7236\u89d2\u8272"},e("pId",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7236\u89d2\u8272"}]})(r.a.createElement(Q.a,{prefix:r.a.createElement(N.a,{type:"user"}),placeholder:"\u7236\u89d2\u8272"}))))}}]),t}(n.Component),ce=B.a.create({name:"addRole_from"})(se),ue=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={confirmLoading:!1},a.userAddFrm=null,a.handleAddRole=function(){a.userAddFrm.validateFields((function(e,t){if(e)return g.a.error("\u6dfb\u52a0\u5931\u8d25");a.props.addRole(t)}))},a.hanldeCloseModal=function(){a.props.close()},a}return Object(E.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(Z.a,{title:"\u6dfb\u52a0\u89d2\u8272\u4fe1\u606f",visible:this.props.visible,onOk:this.handleAddRole,confirmLoading:this.state.confirmLoading,cancelText:"\u53d6\u6d88",okText:"\u6dfb\u52a0",onCancel:this.hanldeCloseModal,destroyOnClose:!0},r.a.createElement(ce,{ref:function(t){return e.userAddFrm=t}}))}}]),t}(n.Component),de=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.data;this.props.form.setFieldsValue({pId:e.pId,name:e.name,des:e.des})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(B.a,{layout:"horizontal",labelCol:{span:4},wrapperCol:{span:20}},r.a.createElement(B.a.Item,{label:"\u89d2\u8272\u540d"},e("name",{rules:[{min:2,max:20,message:"\u8bf7\u8f93\u51652-20\u4e2a\u5b57\u7b26"},{required:!0,message:"\u8bf7\u8f93\u5165\u89d2\u8272\u540d"}]})(r.a.createElement(Q.a,{prefix:r.a.createElement(N.a,{type:"user"}),placeholder:"\u89d2\u8272\u540d"}))),r.a.createElement(B.a.Item,{label:"\u89d2\u8272\u63cf\u8ff0"},e("des",{rules:[{pattern:/\w{2,20}/gi,message:"\u8bf7\u8f93\u5165\u89d2\u8272\u63cf\u8ff0"}]})(r.a.createElement(Q.a,{prefix:r.a.createElement(N.a,{type:"setting"}),placeholder:"\u89d2\u8272\u63cf\u8ff0"}))),r.a.createElement(B.a.Item,{label:"\u7236\u89d2\u8272"},e("pId",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7236\u89d2\u8272"}]})(r.a.createElement(Q.a,{prefix:r.a.createElement(N.a,{type:"user"}),placeholder:"\u7236\u89d2\u8272"}))))}}]),t}(n.Component),pe=B.a.create({name:"edit_from"})(de),me=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).editFrm=null,a.handleEditRole=function(){a.editFrm.validateFields((function(e,t){e||a.props.saveRole(Object.assign({},a.props.data,t))}))},a}return Object(E.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Z.a,{title:"\u6dfb\u52a0\u89d2\u8272\u4fe1\u606f",visible:this.props.visible,okText:"\u4fee\u6539",cancelText:"\u53d6\u6d88",onCancel:function(){e.props.close()},onOk:this.handleEditRole,destroyOnClose:!0},r.a.createElement(pe,{ref:function(t){return e.editFrm=t},data:this.props.data})))}}]),t}(n.Component),he=a(45),fe=a.n(he),Ee=a(85),ge=a(473),Ae=a(474),be=a(86),ye=a(82),ve=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={allPer:[],rolePer:[],allCheckedPer:[]},a.handleChangeChecked=function(e,t){var n=Object(Ee.a)(a.state.allCheckedPer);t.target.checked?n.push(e):n=n.filter((function(t){return t.id!==e.id})),a.setState({allCheckedPer:n})},a.handleSubmitSetPer=function(){var e=a.state,t=e.allCheckedPer,n=e.rolePer,r=[];r.push(t.forEach((function(e,t){n.findIndex((function(t){return t.permissionId===e.id}))<0&&R.addRolePer({id:Date.now()+t,del:0,subon:S(new Date),permissionId:e.id,roleId:a.props.data.id})}))),n.forEach((function(e){t.findIndex((function(t){return t.id===e.permissionId}))<0&&r.push(R.deleteRolePer(e.id))})),Promise.all(r).then((function(e){g.a.success("\u8bbe\u7f6e\u6210\u529f"),a.props.close()})).catch((function(e){console.log("err",e),g.a.error("\u8bbe\u7f6e\u5931\u8d25")}))},a}return Object(E.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e,t,a;return fe.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fe.a.awrap(R.loadAllPer().then((function(e){return e.data})));case 2:return e=n.sent,n.next=5,fe.a.awrap(R.loadRolePer(this.props.data.id).then((function(e){return e.data})));case 5:t=n.sent,a=[],t.forEach((function(t){var n=e.find((function(e){return e.id===t.permissionId}));n&&a.push(n)})),this.setState({allPer:e,rolePer:t,allCheckedPer:a});case 9:case"end":return n.stop()}}),null,this)}},{key:"render",value:function(){var e=this,t=this.state,a=t.rolePer,n=t.allPer;return r.a.createElement("div",null,r.a.createElement("h3",null,"\u7ed9\u89d2\u8272: ",r.a.createElement("span",{style:{color:ye.blue[5]}},this.props.data.name," "),"\u8bbe\u7f6e\u89d2\u8272\u6743\u9650"),r.a.createElement("hr",null),r.a.createElement(ge.a,{gutter:16},n.map((function(t){var n;return n=a.findIndex((function(e){return e.permissionId===t.id}))>=0,r.a.createElement(Ae.a,{span:8,key:t.id},r.a.createElement(be.a,{onChange:function(a){e.handleChangeChecked(t,a)},defaultChecked:n},t.des))}))))}}]),t}(n.Component),Oe=Q.a.Search,Re=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(l)))).state={params:{_page:1,_limit:6,q:"",_sort:"id",_order:"desc"},total:0,rolelist:[],columns:[{dataIndex:"id",title:"\u7f16\u53f7"},{dataIndex:"name",title:"\u89d2\u8272\u540d"},{dataIndex:"status",title:"\u72b6\u6001",render:function(e,t){return r.a.createElement("span",null,0===e?"\u542f\u7528":"\u7981\u7528")}},{dataIndex:"subon",title:"\u63d0\u4ea4\u65f6\u95f4"},{dataIndex:"pId",title:"\u7236\u89d2\u8272"},{key:"del",title:"\u64cd\u4f5c",render:function(e,t){return r.a.createElement("div",null,r.a.createElement(te.a,{type:"primary",style:{marginRight:"5px"},onClick:function(){a.handleEdit(t)}},"\u7f16\u8f91"),r.a.createElement(ae.a,{title:"\u786e\u5b9a\u5220\u9664?",onConfirm:function(){a.handleRoleDelte(t.id)},okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},r.a.createElement(te.a,{type:"danger"}," \u5220\u9664")))}}],selectedRowKeys:[],showAddRoleDialog:!1,showEditRoleDialog:!1,showSetRolePerDialog:!1,setRolePer:null},a.loadData=function(){return R.loadRoleList(a.state.params).then((function(e){a.setState({rolelist:e.data,total:parseInt(e.headers["x-total-count"])})}))},a.changePage=function(e,t){a.setState((function(a){return a.params._page=e,a.params._limit=t,Object(u.a)({},a)}),(function(){a.loadData()}))},a.handleSearch=function(e){a.setState((function(t){return t.params.q=e,Object(u.a)({},t)}),(function(){a.loadData()}))},a.handleEdit=function(e){a.setState({showEditRoleDialog:!0,editRole:e})},a.handleBarEdit=function(){if(1!==a.state.selectedRowKeys.length)return g.a.error("\u8bf7\u9009\u4e2d\u4e00\u6761\u6570\u636e\u8fdb\u884c\u7f16\u8f91!");var e=a.state.rolelist.find((function(e){return e.id===a.state.selectedRowKeys[0]}));e&&a.handleEdit(e)},a.cloeEditDialog=function(){a.setState({showEditRoleDialog:!1})},a.saveRole=function(e){R.saveRole(e).then((function(e){a.cloeEditDialog(),a.loadData(),g.a.info("\u4fee\u6539\u6210\u529f")})).catch((function(e){g.a.error("\u4fee\u6539\u5931\u8d25"),console.log(e)}))},a.handleDelte=function(){a.state.selectedRowKeys.length<=0?g.a.warn("\u8bf7\u9009\u62e9\u8981\u5220\u9664\u7684\u6570\u636e!"):Z.a.confirm({title:"\u786e\u5b9a\u8981\u5220\u9664\u5417?",okText:"\u5220\u9664",cancelText:"\u53d6\u6d88",onOk:function(){R.deleteRoles(a.state.selectedRowKeys).then((function(e){a.setState({selectedRowKeys:[]}),a.loadData(),g.a.info("\u5220\u9664\u6210\u529f!")})).catch((function(e){g.a.error(e.toString())}))}})},a.handleRoleDelte=function(e){R.deleteRoles([e]).then((function(e){a.loadData(),g.a.info("\u5220\u9664\u6210\u529f!")})).catch((function(e){g.a.error(e.toString())}))},a.handleAdd=function(){a.setState({showAddRoleDialog:!0})},a.addRole=function(e){var t=Object.assign({id:Date.now(),del:0,subon:S(new Date),status:0},e);R.addRole(t).then((function(e){g.a.info("\u6dfb\u52a0\u6210\u529f"),a.cloeAddDialog(),a.loadData()})).catch((function(e){console.log(e),g.a.error("\u6dfb\u52a0\u5931\u8d25")}))},a.cloeAddDialog=function(){a.setState({showAddRoleDialog:!1})},a.handleRolePer=function(){if(1!==a.state.selectedRowKeys.length)return g.a.error("\u8bf7\u9009\u4e2d\u4e00\u6761\u6570\u636e!");var e=a.state.rolelist.find((function(e){return e.id===a.state.selectedRowKeys[0]}));a.setState({showSetRolePerDialog:!0,setRolePer:e})},a.buttonStyle={margin:"5px"},a}return Object(E.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var e=this,t=null,a={selectedRowKeys:this.state.selectedRowKeys,onChange:function(t){e.setState({selectedRowKeys:t})}};return r.a.createElement("div",null,r.a.createElement(ne.a,null,r.a.createElement(ne.a.Item,null,r.a.createElement(i.b,{to:"/home"},"\u9996\u9875")),r.a.createElement(ne.a.Item,null,r.a.createElement(i.b,{to:"/home/user_mgr"},"\u89d2\u8272\u7ba1\u7406"))),r.a.createElement("hr",null),r.a.createElement(te.a,{style:this.buttonStyle,type:"primary",onClick:this.handleAdd},"\u6dfb\u52a0"),r.a.createElement(te.a,{style:this.buttonStyle,type:"primary",onClick:this.handleBarEdit},"\u7f16\u8f91"),r.a.createElement(te.a,{style:this.buttonStyle,type:"danger",onClick:this.handleDelte},"\u5220\u9664"),r.a.createElement(te.a,{style:this.buttonStyle,type:"danger",onClick:this.handleRolePer},"\u8bbe\u7f6e\u89d2\u8272\u6743\u9650"),r.a.createElement(Oe,{placeholder:"\u641c\u7d22",enterButton:!0,style:{width:"300px",margin:"5px"},onSearch:this.handleSearch}),r.a.createElement(re.a,{style:{background:"#fefefe"},dataSource:this.state.rolelist,columns:this.state.columns,rowKey:function(e){return e.id},bordered:!0,rowSelection:a,pagination:{total:this.state.total,pageSize:6,defaultCurrent:1,onChange:this.changePage}}),r.a.createElement(ue,{visible:this.state.showAddRoleDialog,close:this.cloeAddDialog,addRole:this.addRole}),r.a.createElement(me,{visible:this.state.showEditRoleDialog,close:this.cloeEditDialog,data:this.state.editRole,saveRole:this.saveRole}),r.a.createElement(Z.a,{visible:this.state.showSetRolePerDialog,okText:"\u8bbe\u7f6e",cancelText:"\u53d6\u6d88",title:"\u8bbe\u7f6e\u89d2\u8272\u6743\u9650",onCancel:function(){return e.setState({showSetRolePerDialog:!1})},onOk:function(){t.handleSubmitSetPer()}},r.a.createElement(ve,{close:function(){return e.setState({showSetRolePerDialog:!1})},ref:function(e){return t=e},data:this.state.setRolePer})))}}]),t}(n.Component),je=a(475),De=a(478),we=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).handleChangeAvatar=function(e){return e.file.response?e.file.response.img:""},a}return Object(E.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(B.a,{layout:"horizontal",labelCol:{span:4},wrapperCol:{span:20}},r.a.createElement(B.a.Item,{label:"\u7528\u6237\u5934\u50cf"},e("avatar",{getValueFromEvent:this.handleChangeAvatar,rules:[{required:!0,message:"\u8bf7\u4e0a\u4f20\u56fe\u7247!"}]})(r.a.createElement(De.a,{accept:"image/*",action:"/per/upload",headers:{Authorization:w()},name:"imgF",listType:"picture",onChange:this.handleChangeAvatar},r.a.createElement(te.a,null,"\u4e0a\u4f20\u5934\u50cf")))),r.a.createElement(B.a.Item,{label:"\u7528\u6237\u540d"},e("username",{rules:[{pattern:/\w{6,20}/gi,message:"\u8bf7\u8f93\u51656-20\u4e2a\u5b57\u7b26"},{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}]})(r.a.createElement(Q.a,{prefix:r.a.createElement(N.a,{type:"user"}),placeholder:"\u7528\u6237\u540d"}))),r.a.createElement(B.a.Item,{label:"\u90ae\u7bb1"},e("mail",{rules:[{type:"email",message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u7bb1\u683c\u5f0f"},{required:!0,message:"\u8bf7\u8f93\u5165\u90ae\u7bb1"}]})(r.a.createElement(Q.a,{prefix:r.a.createElement(N.a,{type:"mail"}),placeholder:"\u90ae\u7bb1"}))),r.a.createElement(B.a.Item,{label:"\u59d3\u540d"},e("name",{rules:[{min:2,message:"\u8bf7\u8f93\u5165\u5927\u4e8e2\u4e2a\u5b57\u7b26"},{required:!0,message:"\u8bf7\u8f93\u5165\u59d3\u540d"}]})(r.a.createElement(Q.a,{prefix:r.a.createElement(N.a,{type:"user"}),placeholder:"\u59d3\u540d"}))),r.a.createElement(B.a.Item,{label:"\u5bc6\u7801"},e("password",{rules:[{pattern:/\w{6,20}/gi,message:"\u8bf7\u8f93\u51656-20\u4e2a\u5b57\u7b26!"},{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801!"}]})(r.a.createElement(Q.a,{prefix:r.a.createElement(N.a,{type:"safety"}),placeholder:"\u5bc6\u7801"}))),r.a.createElement(B.a.Item,{label:"\u7535\u8bdd"},e("phone",{rules:[{pattern:/\d{11}/gi,message:"\u8bf7\u8f93\u516511\u4e2a\u5b57\u7b26!"}]})(r.a.createElement(Q.a,{prefix:r.a.createElement(N.a,{type:"phone"}),placeholder:"\u7535\u8bdd"}))))}}]),t}(n.Component),Ie=a(62),Se={list:[],total:0};var ke={list:[],total:0};var Pe=Object(Ie.c)({UserList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G.LOAD_USER_LIST:return t.payload;case G.ADD_USER:return e.list.unshift(t.payload),e.total+=1,Object(u.a)({},e);case G.EIDT_USER:var a=e.list.findIndex((function(e){return e.id===t.payload.id}));return e.list.splice(a,1,t.payload),Object(u.a)({},e);default:return e}},PerList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0,a=Object(u.a)({},e);switch(t.type){case G.LOAD_PER_LIST:return t.payload;case G.ADD_PER:return a.list.unshift(t.payload),a.total+=1,a;case G.EDIT_PER:var n=a.list.find((function(e){return e.id===t.payload.id}));return e.list.splice(n,1,t.payload),Object(u.a)({},e);case G.DEL_PER:return a.list=a.list.filter((function(e){return!t.payload.includes(e.id)})),a.total=a.total-t.payload.length,a;default:return e}}}),xe=a(233),Ce=Object(Ie.e)(Pe,{},Object(Ie.d)(Object(Ie.a)(xe.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));var Me=function(e){return function(t){R.loadUserList(e).then((function(e){var a=parseInt(e.headers["x-total-count"]);t({type:G.LOAD_USER_LIST,payload:{list:e.data,total:a}})}))}},Ue=function(e){return function(t){return R.addUser(e).then((function(e){t({type:G.ADD_USER,payload:e.data})}))}},Le=function(e){return function(t){return R.updataUser(e).then((function(e){t({type:G.EIDT_USER,payload:e.data})}))}},Te=B.a.create({name:"adduser_from"})(we),Ne=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={confirmLoading:!1},a.userAddFrm=null,a.handleOk=function(){a.userAddFrm.validateFields((function(e,t){e||(t.del=0,t.id=Date.now(),t.isTeacher=!1,t.avatar="http://localhost:8888"+t.avatar,Ce.dispatch(Ue(t)).then((function(e){g.a.info("\u6dfb\u52a0\u6210\u529f\uff01"),a.hanldeCloseModal()})).catch((function(e){g.a.error("\u6dfb\u52a0\u5931\u8d25\uff01\u8bf7\u91cd\u8bd5!"),console.log(e)})))}))},a.hanldeCloseModal=function(){a.props.close(),a.userAddFrm.resetFields()},a}return Object(E.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(Z.a,{title:"\u6dfb\u52a0\u7528\u6237\u4fe1\u606f",visible:this.props.visible,onOk:this.handleOk,confirmLoading:this.state.confirmLoading,cancelText:"\u53d6\u6d88",onCancel:this.hanldeCloseModal},r.a.createElement(Te,{ref:function(t){return e.userAddFrm=t}}))}}]),t}(n.Component),_e=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.form.setFieldsValue({name:this.props.data.name,username:this.props.data.username,user:this.props.data.user,mail:this.props.data.mail,password:this.props.data.password,phone:this.props.data.phone})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(B.a,{layout:"horizontal",labelCol:{span:4},wrapperCol:{span:20}},r.a.createElement(B.a.Item,{label:"\u7528\u6237\u540d"},e("username",{rules:[{pattern:/\w{6,20}/gi,message:"\u8bf7\u8f93\u51656-20\u4e2a\u5b57\u7b26"},{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}]})(r.a.createElement(Q.a,{prefix:r.a.createElement(N.a,{type:"user"}),placeholder:"\u7528\u6237\u540d"}))),r.a.createElement(B.a.Item,{label:"\u90ae\u7bb1"},e("mail",{rules:[{type:"email",message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u7bb1\u683c\u5f0f"},{required:!0,message:"\u8bf7\u8f93\u5165\u90ae\u7bb1"}]})(r.a.createElement(Q.a,{prefix:r.a.createElement(N.a,{type:"mail"}),placeholder:"\u90ae\u7bb1"}))),r.a.createElement(B.a.Item,{label:"\u59d3\u540d"},e("name",{rules:[{min:2,message:"\u8bf7\u8f93\u5165\u5927\u4e8e2\u4e2a\u5b57\u7b26"},{required:!0,message:"\u8bf7\u8f93\u5165\u59d3\u540d"}]})(r.a.createElement(Q.a,{prefix:r.a.createElement(N.a,{type:"user"}),placeholder:"\u59d3\u540d"}))),r.a.createElement(B.a.Item,{label:"\u5bc6\u7801"},e("password",{rules:[{pattern:/\w{6,20}/gi,message:"\u8bf7\u8f93\u51656-20\u4e2a\u5b57\u7b26!"},{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801!"}]})(r.a.createElement(Q.a,{prefix:r.a.createElement(N.a,{type:"safety"}),placeholder:"\u5bc6\u7801"}))),r.a.createElement(B.a.Item,{label:"\u7535\u8bdd"},e("phone",{rules:[{pattern:/\d{11}/gi,message:"\u8bf7\u8f93\u516511\u4e2a\u5b57\u7b26!"}]})(r.a.createElement(Q.a,{prefix:r.a.createElement(N.a,{type:"phone"}),placeholder:"\u7535\u8bdd"}))))}}]),t}(n.Component),Fe=B.a.create({name:"edit_from"})(_e),Ze=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).editFrm=null,a.handleEditUser=function(){a.editFrm.validateFields((function(e,t){if(!e){var n=Object(u.a)({},a.props.data,{},t);Ce.dispatch(Le(n)).then((function(e){g.a.info("\u4fee\u6539\u6210\u529f"),a.props.close()})).catch((function(e){g.a.error("\u4fee\u6539\u5931\u8d25")}))}}))},a}return Object(E.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Z.a,{title:"\u6dfb\u52a0\u7528\u6237\u4fe1\u606f",visible:this.props.visible,okText:"\u4fee\u6539",cancelText:"\u53d6\u6d88",onCancel:function(){e.props.close()},onOk:this.handleEditUser,destroyOnClose:!0},r.a.createElement(Fe,{ref:function(t){return e.editFrm=t},data:this.props.data})))}}]),t}(n.Component),ze=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={allRole:[],userRoles:[],allCheckedRole:[]},a.handleChangeCheckbox=function(e,t){var n=Object(Ee.a)(a.state.allCheckedRole);t.target.checked?n.push(e):n=n.filter((function(t){return t.id!==e.id})),a.setState({allCheckedRole:n})},a.handleSubmitSetRole=function(){var e=a.state,t=e.allCheckedRole,n=e.userRoles,r=[];t.forEach((function(e,t){if(n.findIndex((function(t){return t.roleId===e.id}))<0){var l=R.addUserRole({id:Date.now()+t,del:0,subon:S(new Date),roleId:e.id,userId:a.props.data.id});r.push(l)}})),n.forEach((function(e){if(t.findIndex((function(t){return t.id===e.roleId}))<0){var a=R.deleteUserRole(e.id);r.push(a)}})),Promise.all(r).then((function(e){g.a.success("\u4fee\u6539\u6210\u529f"),a.props.close()})).catch((function(e){console.log(e),g.a.error("\u4fee\u6539\u5931\u8d25")}))},a}return Object(E.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e,t,a;return fe.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fe.a.awrap(R.loadUserRoles(this.props.data.id));case 2:return e=n.sent,n.next=5,fe.a.awrap(R.loadAllRoles());case 5:t=n.sent,a=[],e.data.forEach((function(e){var n=t.data.find((function(t){return t.id===e.roleId}));n&&a.push(n)})),this.setState({userRoles:e.data,allRole:t.data,allCheckedRole:a});case 9:case"end":return n.stop()}}),null,this)}},{key:"render",value:function(){var e=this;return r.a.createElement(Z.a,{title:"\u8bbe\u7f6e\u7528\u6237\u89d2\u8272",visible:this.props.visible,okText:"\u8bbe\u7f6e",cancelText:"\u53d6\u6d88",onCancel:function(){e.props.close()},onOk:this.handleSubmitSetRole,destroyOnClose:!0},r.a.createElement(ge.a,null,this.state.allRole.map((function(t,a){var n=!1;return e.state.userRoles.some((function(e){return e.roleId===t.id}))&&(n=!0),r.a.createElement(Ae.a,{span:8,key:t.id},r.a.createElement(be.a,{defaultChecked:n,onChange:function(a){return e.handleChangeCheckbox(t,a)}},t.name))}))))}}]),t}(n.Component),Ye=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={allPer:[],userPer:[],allCheckedPer:[]},a.handleChangeChecked=function(e,t){var n=Object(Ee.a)(a.state.allCheckedPer);t.target.checked?n.push(e):n=n.filter((function(t){return t.id!==e.id})),a.setState({allCheckedPer:n})},a.handleSubmitSetPer=function(){var e=a.state,t=e.allCheckedPer,n=e.userPer,r=[];r.push(t.forEach((function(e,t){n.findIndex((function(t){return t.permissionId===e.id}))<0&&R.addUserPer({id:Date.now()+t,del:0,subon:S(new Date),userId:a.props.data.id,permissionId:e.id})}))),n.forEach((function(e){t.findIndex((function(t){return e.permissionId===t.id}))<0&&r.push(R.deleteUserPer(e.id))})),Promise.all(r).then((function(e){g.a.success("\u8bbe\u7f6e\u6210\u529f"),a.props.close()})).catch((function(e){console.log("err",e),g.a.error("\u8bbe\u7f6e\u5931\u8d25")}))},a}return Object(E.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e,t,a;return fe.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fe.a.awrap(R.loadAllPer().then((function(e){return e.data})));case 2:return e=n.sent,n.next=5,fe.a.awrap(R.loadUserPer(this.props.data.id).then((function(e){return e.data})));case 5:t=n.sent,a=[],t.forEach((function(t){var n=e.find((function(e){return e.id===t.permissionId}));n&&a.push(n)})),this.setState({allPer:e,userPer:t,allCheckedPer:a});case 9:case"end":return n.stop()}}),null,this)}},{key:"render",value:function(){var e=this,t=this.state,a=t.userPer,n=t.allPer;return r.a.createElement(Z.a,{title:"\u8bbe\u7f6e\u7528\u6237\u6743\u9650\u89d2\u8272",visible:this.props.visible,okText:"\u8bbe\u7f6e",cancelText:"\u53d6\u6d88",onCancel:function(){e.props.close()},onOk:this.handleSubmitSetPer,destroyOnClose:!0},r.a.createElement("h3",null,"\u7ed9\u89d2\u8272: ",r.a.createElement("span",{style:{color:ye.blue[5]}},this.props.data.name," "),"\u8bbe\u7f6e\u89d2\u8272\u6743\u9650"),r.a.createElement("hr",null),r.a.createElement(ge.a,{gutter:16},n.map((function(t){var n;return n=a.findIndex((function(e){return e.permissionId===t.id}))>0,r.a.createElement(Ae.a,{span:8,key:t.id},r.a.createElement(be.a,{onChange:function(a){e.handleChangeChecked(t,a)},defaultChecked:n},t.des))}))))}}]),t}(n.Component),Ge=Q.a.Search,Be=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(l)))).state={total:0,unsubscribe:null,userlist:Ce.getState().UserList.list,columns:[{title:"\u7f16\u53f7",dataIndex:"id"},{title:"\u59d3\u540d",dataIndex:"name"},{title:"\u7535\u8bdd",dataIndex:"phone"},{title:"\u767b\u5f55\u540d",dataIndex:"username"},{title:"\u5934\u50cf",dataIndex:"avatar",render:function(e){return r.a.createElement(je.a,{src:e})}},{title:"\u7f16\u8f91",dataIndex:"del",render:function(e,t){return r.a.createElement("div",null,r.a.createElement(te.a,{type:"primary",style:{marginRight:"5px"},onClick:function(){a.setState({showEditUserDialog:!0,editUserRow:t})}},"\u7f16\u8f91"),r.a.createElement(ae.a,{title:"\u786e\u5b9a\u5220\u9664?",onConfirm:function(){a.handleUserDelte(t.id)},okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},r.a.createElement(te.a,{type:"danger"}," \u5220\u9664")))}}],params:{_page:1,_limit:6},showAddUserDialog:!1,showEditUserDialog:!1,showSetRoleDialog:!1,showSetPerDialog:!1,editUserRow:null,setRoleUser:null,setPerUser:null,selectedRowKeys:[],showAddRoleDialog:!1},a.changePage=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";n&&(n=a.state.params.q),a.setState((function(a){return Object(u.a)({},a,{},{params:{_page:e,_limit:t,q:n}})}),(function(){Ce.dispatch(Me(a.state.params))}))},a.userListChange=function(){var e=Ce.getState().UserList;a.setState({userlist:e.list,total:e.total})},a.handleDelte=function(){a.state.selectedRowKeys.length<=0?g.a.warn("\u8bf7\u9009\u62e9\u8981\u5220\u9664\u7684\u6570\u636e!"):Z.a.confirm({title:"\u786e\u5b9a\u8981\u5220\u9664\u5417?",okText:"\u5220\u9664",cancelText:"\u53d6\u6d88",onOk:function(){R.deleteUser(a.state.selectedRowKeys).then((function(e){a.setState({selectedRowKeys:[]}),Ce.dispatch(Me(a.state.params)),g.a.info("\u5220\u9664\u6210\u529f!")})).catch((function(e){g.a.error("\u5220\u9664\u5931\u8d25!")}))}})},a.handleEdit=function(){if(1===a.state.selectedRowKeys.length){var e=a.state.selectedRowKeys[0],t=Ce.getState().UserList.list.find((function(t){return t.id===e}));a.setState({editUserRow:t,showEditUserDialog:!0})}else g.a.error("\u8bf7\u9009\u4e2d\u4e00\u6761\u6570\u636e\u8fdb\u884c\u7f16\u8f91")},a.handleUserDelte=function(e){R.deleteUser([e]).then((function(t){Ce.dispatch(Me(a.state.params)),g.a.info("\u5220\u9664\u6210\u529f!");var n=a.state.selectedRowKeys.filter((function(t){return t!==e}));a.setState({selectedRowKeys:n})})).catch((function(e){g.a.error("\u5220\u9664\u5931\u8d25!")}))},a.buttonStyle={margin:"5px"},a.hideAddUserDialog=function(){a.setState({showAddUserDialog:!1})},a.hideEditUserDialog=function(){a.setState({showEditUserDialog:!1})},a.handleSetRole=function(){if(1!==a.state.selectedRowKeys.length)return g.a.error("\u8bf7\u9009\u4e2d\u4e00\u6761\u6570\u636e");var e=a.state.selectedRowKeys[0],t=a.state.userlist.find((function(t){return t.id===e}));a.setState({showSetRoleDialog:!0,setRoleUser:t})},a.handleSetPer=function(){if(1!==a.state.selectedRowKeys.length)return g.a.error("\u8bf7\u9009\u4e2d\u4e00\u6761\u7528\u6237\u8fdb\u884c\u6743\u9650\u8bbe\u7f6e");var e=a.state.selectedRowKeys[0],t=a.state.userlist.find((function(t){return t.id===e}));a.setState({showSetPerDialog:!0,setPerUser:t})},a}return Object(E.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){Ce.dispatch(Me(this.state.params));var e=Ce.subscribe(this.userListChange);this.setState({unsubscribe:e})}},{key:"componentWillUnmount",value:function(){this.state.unsubscribe&&this.state.unsubscribe()}},{key:"render",value:function(){var e=this,t={selectedRowKeys:this.state.selectedRowKeys,onChange:function(t){e.setState({selectedRowKeys:t})}};return r.a.createElement("div",null,r.a.createElement(ne.a,null,r.a.createElement(ne.a.Item,null,r.a.createElement(i.b,{to:"/home"},"\u9996\u9875")),r.a.createElement(ne.a.Item,null,r.a.createElement(i.b,{to:"/home/user_mgr"},"\u7528\u6237\u7ba1\u7406"))),r.a.createElement("hr",null),r.a.createElement(te.a,{style:this.buttonStyle,type:"primary",onClick:function(){return e.setState({showAddUserDialog:!0})}},"\u6dfb\u52a0"),r.a.createElement(te.a,{style:this.buttonStyle,type:"primary",onClick:this.handleEdit},"\u7f16\u8f91"),r.a.createElement(te.a,{style:this.buttonStyle,type:"danger",onClick:this.handleDelte},"\u5220\u9664"),r.a.createElement(te.a,{style:this.buttonStyle,type:"danger",onClick:this.handleSetRole},"\u8bbe\u7f6e\u89d2\u8272"),r.a.createElement(te.a,{style:this.buttonStyle,type:"primary",onClick:this.handleSetPer},"\u8bbe\u7f6e\u6743\u9650"),r.a.createElement(Ge,{placeholder:"\u641c\u7d22",onSearch:function(t){e.setState((function(e){return e.params.q=t,Object(u.a)({},e)}),(function(){e.changePage(1,6,t)}))},enterButton:!0,style:{width:"300px",margin:"5px"}}),r.a.createElement(re.a,{style:{background:"#fefefe"},dataSource:this.state.userlist,columns:this.state.columns,rowKey:function(e){return e.id},rowSelection:t,bordered:!0,pagination:{total:this.state.total,pageSize:6,defaultCurrent:1,onChange:this.changePage}}),r.a.createElement(Ne,{visible:this.state.showAddUserDialog,close:this.hideAddUserDialog}),r.a.createElement(Ze,{visible:this.state.showEditUserDialog,close:this.hideEditUserDialog,data:this.state.editUserRow}),this.state.showSetRoleDialog?r.a.createElement(ze,{visible:this.state.showSetRoleDialog,data:this.state.setRoleUser,close:function(){e.setState({showSetRoleDialog:!1})}}):null,this.state.showSetPerDialog?r.a.createElement(Ye,{visible:this.state.showSetPerDialog,data:this.state.setPerUser,close:function(){e.setState({showSetPerDialog:!1})}}):null)}}]),t}(n.Component),We=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(i.b,{to:"".concat(this.props.match.path,"/p1")},"\u5546\u54c1\u7ba1\u74061"),"|",r.a.createElement(i.b,{to:"".concat(this.props.match.path,"/p2")},"\u5546\u54c1\u7ba1\u74062"),r.a.createElement("hr",null),r.a.createElement(L,{per:1578213927545,path:"".concat(this.props.match.path,"/p1"),render:function(){return r.a.createElement("h2",null,"p1\u7ebf\u4e0a")}}),r.a.createElement(L,{per:1578213940500,path:"".concat(this.props.match.path,"/p2"),render:function(){return r.a.createElement("h2",null,"p2\u7ebf\u4e0a")}}))}}]),t}(n.Component),Qe=U.a.Header,He=U.a.Footer,Je=U.a.Sider,Xe=U.a.Content,Ve=function(e){function t(e){var a;return Object(p.a)(this,t),a=Object(h.a)(this,Object(f.a)(t).call(this,e)),O.a.defaults.headers.Authorization=w(),sessionStorage.removeItem("LOGIN_USER_PER"),a}return Object(E.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.match;return r.a.createElement(U.a,{style:{height:"100vh"}},r.a.createElement(Qe,{style:{color:"#fff",padding:"0 15px"}},r.a.createElement(z,{history:this.props.history})),r.a.createElement(U.a,null,r.a.createElement(Je,{style:{backgroundColor:"#fff"}},r.a.createElement(F,{history:this.props.history})),r.a.createElement(Xe,{style:{padding:"15px"}},r.a.createElement(s.d,null,r.a.createElement(L,{per:1570872984243,path:"".concat(e.path,"/user_mgr"),component:Be}),r.a.createElement(L,{per:1570873025381,path:"".concat(e.path,"/role_mgr"),component:Re}),r.a.createElement(L,{per:1570873044424,path:"".concat(e.path,"/per_mgr"),component:ie}),r.a.createElement(s.b,{path:"".concat(e.path,"/goods_mgr"),component:We}),r.a.createElement(s.b,{render:function(){return r.a.createElement("h3",null,"\u6b22\u8fce\u8fdb\u5165\u5b89\u5fc3\u5e10\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf")}})))),r.a.createElement(He,{style:{backgroundColor:"silver",height:"24px",padding:"0",lineHeight:"24px"}},"\u5e95\u90e8"))}}]),t}(n.Component);a(470);var Ke=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(i.a,null,r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/",exact:!0,render:function(e){return r.a.createElement(s.a,{to:"/home"})}}),r.a.createElement(s.b,{path:"/home",render:function(e){return sessionStorage.getItem(j)?r.a.createElement(Ve,e):r.a.createElement(s.a,{to:"/login?preurl=".concat(e.match.path)})}}),r.a.createElement(s.b,{path:"/login",component:M}),r.a.createElement(s.b,{component:c}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Y.a,{store:Ce},r.a.createElement(Ke,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[237,1,2]]]);
//# sourceMappingURL=main.cc7e6905.chunk.js.map